<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.prj.nicarnaecar.dao.ProfitDAO">	
	
	<insert id="profitInsert" parameterType="ProfitVO">
		insert into PROFIT(pnumber,ptarget,pinout,pamount,eemail,bnumber,pmemo)
		values(profit_seq.nextval,#{ptarget},#{pinout},#{pamount},#{eemail},
		<choose>
			<when test='bnumber == null'>0</when>
			<when test='bnumber != null'>#{bnumber}</when>
		</choose>
		,#{pmemo})
	</insert>
	
	<delete id="profitDelete" parameterType="int">
		delete from profit where pnumber=#{pnumber}
	</delete>
	
	<select id="profitList"  resultType="ProfitVO">
		select * from profit
	</select>
	
	<select id="profitRecord" resultType="ProfitVO">
		select t2.* from (select row_number() over (order by pnumber desc) as num, t1.* from profit t1) t2
		where num between #{startRecord} and #{endRecord}
	</select>
	
	<select id="profitCount" resultType="int">
		select count(*) from profit
	</select>
	
</mapper>